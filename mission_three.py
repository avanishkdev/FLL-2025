# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":150,"y":100,"deletable":false,"next":{"block":{"type":"variables_set_motor","id":"d8I3NC/~/Bd|JB=./IYI","fields":{"VAR":{"id":"J?}q![eYC]S.)}0EIHQ-"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"NJ9e)#7+uOY7+#ba7~-c","fields":{"NAME":"C"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"1|/:FcFe4/{JG!]dx.`z","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"!{aZHs|:76`}@xu[@*[(","fields":{"VAR":{"id":"_{%Sf|7eh8`AN@m.1i*P"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"xNY3xGxfrII^@z6P}%dd","fields":{"NAME":"A"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"8I*f(++dw~YqGRBDzO~^","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"@AcnA{)AYJ8|ec|1u^B3","fields":{"VAR":{"id":"vo%33gv|?(#@]@v?]I{3"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"3;i5B%I`^X4q$Hki3;5V","fields":{"NAME":"B"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"?~xgRJ^iYM8V=pkY1N*5","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_drive_base","id":"}+VZKywZ`p=8?yi:GFV(","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M"}},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"/KVvz;C;`+^D2ca~7c(j","fields":{"VAR":{"id":"_{%Sf|7eh8`AN@m.1i*P","name":"left","type":"Motor"}}}},"VAR2":{"shadow":{"type":"variables_get_motor_device","id":"VWb?bKKD$2Ic_c90BX`0","fields":{"VAR":{"id":"J?}q![eYC]S.)}0EIHQ-","name":"right","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":";r6!/wo1)$bmOgj}at)d","fields":{"VALUE0":56}}},"VALUE1":{"shadow":{"type":"unit_distance","id":"+_d@.!aphLEZd5.|I]|!","fields":{"VALUE0":98}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":93,"y":469,"deletable":false,"next":{"block":{"type":"blockComment","id":"oReU)XzWcn8z]{#]PyTQ","fields":{"FIELDNAME":"Drive forward to the location"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"!_VvEEX3P4Hp=TUv|SjT","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"SO5XWs5DAUS)Y*X7F5B:","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"k?;q^4~v{H_i`_jTb$(7","fields":{"VALUE0":735}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"oi[%d}Q/h+.]GC(j0)Ly","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"Tj~eT]ukWMnbH:Pu}0v]","fields":{"FIELDNAME":"turn right at the location"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"o)zcp`lX_=d^dpV3y^pR","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"iV}a@!;f0:GwpwfxO,:C","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"yh|ZP!!g?`xG.)$%fXYq","fields":{"VALUE0":90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"W/gkN6,WH|IhUe:`(?CF","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"n4YqGJ[;:zyr7+i2NUnO","fields":{"FIELDNAME":"Drive forward to the location"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"k{RnO]9Tr~d6W}q[5dNB","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"h$:~Pv%j0bE5~/Y`asP{","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"nOS~+X*Dn?H,6bx`Ik^N","fields":{"VALUE0":365}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"hW~}doutiuh+FE1E^UDx","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"N8?(iz7]M7?~6ww}i0Mp","fields":{"FIELDNAME":"turn left"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"vP9_Z]43=Vc+8`M-%V%=","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"?}6-G8A(O$hXScm}xh5-","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"R=QKHC-mElp)H]gBgxw@","fields":{"VALUE0":-90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"*x;BTCiWq4b}PN:AozPa","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"61}3^8!N4/pW/Ma@N!|j","fields":{"FIELDNAME":"LIFT"},"next":{"block":{"type":"blockMotorRun","id":"ADRA?$MMSLIxhW:8O+s,","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"KARDQjF:`km,.P|H]U4X","fields":{"VAR":{"id":"vo%33gv|?(#@]@v?]I{3","name":"left gear","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"{#~Q3$dh2]1MOHaL?Q``","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"e5;uT-%B},||=$L6S!Sr","fields":{"VALUE0":370}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":":Qmlx^-u);|bB;o_S)mZ","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockMotorRun","id":"_tkIG.=?a#t8l,.q{3OC","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"i.0|`[ZX_G7K-vCQ~,oj","fields":{"VAR":{"id":"vo%33gv|?(#@]@v?]I{3","name":"left gear","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"@A2eW*6y)MA7bx/OfqZ+","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"nUM.cDHORYn~:Ru8Vxo;","fields":{"VALUE0":-359}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"=n|hp~jYz1A0h~r36lrn","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"X0F!kOtXjL+A)K:RPcdA","fields":{"FIELDNAME":"Return to the start"},"next":{"block":{"type":"blockComment","id":"aoK#v_T;9CdLEgVXiO^;","fields":{"FIELDNAME":"Describe your program."},"next":{"block":{"type":"blockDriveBaseDrive2","id":"S#{93d/8,8Zu2?Zh0-a1","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"|kGmOE#$X9poa~o^rc.+","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"q!:k_O4RM$Se6X-3CXjD","fields":{"VALUE0":90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"7^HY-vhakV|E)GR],hQ/","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"m#=g0rhNy[3j=kMKAnIL","fields":{"FIELDNAME":"# Drive back"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"6EH[K!ssmZ[e-f1k3?-0","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"Xg5[+!_LQ^80-Sqk-b8h","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"WX2zA!bhldY|FJ[}{Vjj","fields":{"VALUE0":-365}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"h^WxNbE{bqARgQ:mU]]-","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"vvQQ.y[K9he}6uENb?H0","fields":{"FIELDNAME":"Undo turn right (so turn left)"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"B-TS4d3_QLp8xN}rXZ=e","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"S~uXlkJ%;S;!`U-plNkk","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"3xGuD`YtHEAIk!iy,)/(","fields":{"VALUE0":735}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"-oYjWQ|tpNb7@{^k3msg","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"rokAe)4)`T4`m-.[:^v[","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"qI][i@4:@fp/,)L-dzL5","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"%phx.2G0-l@xd)iE`Kf{","fields":{"VALUE0":-90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"g_we?zfF*-0_{D0YP7HM","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"?hlHv!v{_/E4AXb3Dy5D","fields":{"FIELDNAME":"Drive back to start"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"W6hg=3+]r?]rR/AZ]we2","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"36CkW+1@8e)Dx[zDhvY!","fields":{"VAR":{"id":"P*clZHD?MSLt+xE-q5#M","name":"robot","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"YE#20OT:5=A@C9?;f{j.","fields":{"VALUE0":-735}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"5Pt@4O_y+:i7Xx]{j6]5","fields":{"VALUE":"Stop.HOLD"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"red","id":"Ff@7eog?bf[4HYjstE++","type":"ColorDef"},{"name":"orange","id":"~@):WC)S0|iG3hGP|Rk%","type":"ColorDef"},{"name":"yellow","id":"E$4K=^:J`sA?vP-G4ilN","type":"ColorDef"},{"name":"green","id":"]HLBP~$rMRP=0imIFv.X","type":"ColorDef"},{"name":"cyan","id":"9Cug#cz7`v5o!v1#{K?J","type":"ColorDef"},{"name":"blue","id":"AAX$R.S7XH2JRG,].vL!","type":"ColorDef"},{"name":"violet","id":"i5~Y{G6j[C#{PuY,c;6%","type":"ColorDef"},{"name":"magenta","id":"U9AcV91+7SG-!;1L-d.t","type":"ColorDef"},{"name":"white","id":"XG?~~:^yK},/5SRSuU,]","type":"ColorDef"},{"name":"none","id":"G7Y8$o:Md@YC,pfrAgi_","type":"ColorDef"},{"name":"robot","id":"P*clZHD?MSLt+xE-q5#M","type":"DriveBase"},{"name":"left","id":"_{%Sf|7eh8`AN@m.1i*P","type":"Motor"},{"name":"right","id":"J?}q![eYC]S.)}0EIHQ-","type":"Motor"},{"name":"left gear","id":"vo%33gv|?(#@]@v?]I{3","type":"Motor"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.hubs import PrimeHub
from pybricks.parameters import Direction, Port, Stop
from pybricks.pupdevices import Motor
from pybricks.robotics import DriveBase
from pybricks.tools import wait

# Set up all devices.
hub = PrimeHub()
right = Motor(Port.C, Direction.CLOCKWISE)
left = Motor(Port.A, Direction.COUNTERCLOCKWISE)
left_gear = Motor(Port.B, Direction.COUNTERCLOCKWISE)
robot = DriveBase(left, right, 56, 98)
robot.use_gyro(True)

# Tune speed and acceleration profiles for smoother, more precise motion
robot.settings(
    straight_speed=160,          # mm/s
    straight_acceleration=300,   # mm/s^2
    turn_rate=120,               # deg/s
    turn_acceleration=300        # deg/s^2
)

# Reset heading for consistent absolute turns
hub.imu.reset_heading(0)


# The main program starts here.
# Drive forward to the location (profiled straight)
robot.straight(735)
# turn right at the location (profiled turn)
robot.turn(90)
# Drive forward to the location
robot.straight(365)
# turn left
robot.turn(-90)
# LIFT
left_gear.run_angle(500, 370)
left_gear.run_angle(500, -359)
# Return to the start
# turn right back to 90
robot.turn(90)
# Drive back
robot.straight(-365)
# Undo turn right (so turn left back to 0)
robot.turn(-90)
# Drive back to start
robot.straight(-735)
